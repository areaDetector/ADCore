<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>areaDetector Plugin NDPluginPva</title>
  <meta content="text/html; charset=ISO-8859-1" http-equiv="Content-Type" />
</head>
<body>
  <div style="text-align: center">
    <h1>
      areaDetector Plugin NDPluginPva</h1>
    <h2>
      March 25, 2015</h2>
    <h2>
      Bruno Martins</h2>
    <h2>
      Brookhaven National Laboratory</h2>
  </div>
  <h2>
    Contents</h2>
  <ul>
    <li><a href="#Overview">Overview</a></li>
    <li><a href="#Configuration">Configuration</a></li>
    <li><a href="#PVAServer">Starting the pvAccess server</a></li>
  </ul>
  <h2 id="Overview">
    Overview
  </h2>
  <p>
    This plugin converts NDArray data produced by asynNDArrayDrivers into the EPICSv4
    normative type NTNDArray. An embedded EPICSv4 server is created to serve the new
    NTNDArray structure as an EPICSv4 PV. A <a href="http://epics-pvdata.sourceforge.net/alpha/normativeTypes/normativeTypesNDArray.html">
      description</a> of the structure of the NTNDArray normative type is available.
  </p>
  <p>
    NDPluginPva defines the following parameters.
  </p>
  <table border="1" cellpadding="2" cellspacing="2" style="text-align: left">
    <tbody>
      <tr>
        <td align="center" colspan="7,">
          <b>Parameter Definitions in NDPluginPva.h and EPICS Record Definitions in NDPva.template</b>
        </td>
      </tr>
      <tr>
        <th>
          Parameter index variable</th>
        <th>
          asyn interface</th>
        <th>
          Access</th>
        <th>
          Description</th>
        <th>
          drvInfo string</th>
        <th>
          EPICS record name</th>
        <th>
          EPICS record type</th>
      </tr>
      <tr>
        <td>
          NDPluginPvaPvName</td>
        <td>
          asynOctet</td>
        <td>
          r/o</td>
        <td>
          Name of the EPICSv4 PV being served</td>
        <td>
          PV_NAME</td>
        <td>
          $(P)$(R)PvName_RBV</td>
        <td>
          waveform</td>
      </tr>
    </tbody>
  </table>
  <h2 id="Configuration">
    Configuration</h2>
  <p>
    The NDPluginPva plugin is created with the NDPvaConfigure command, either from C/C++
    or from the EPICS IOC shell.</p>
  <pre>NDPvaConfigure (const char *portName, int queueSize, int blockingCallbacks,
                      const char *NDArrayPort, int NDArrayAddr, const char *pvName,
                      size_t maxMemory, int priority, int stackSize)
  </pre>
  <p>
    For details on the meaning of the parameters to this function refer to the detailed
    documentation on the NDPvaConfigure function in the <a href="areaDetectorDoxygenHTML/_n_d_plugin_pva_8cpp.html">
      NDPluginPva.cpp documentation</a> and in the documentation for the constructor
    for the <a href="areaDetectorDoxygenHTML/class_n_d_plugin_pva.html">NDPluginPva class</a>.
  </p>
  <p>
    The following MEDM screen for the NDPluginPva. The only item not in the base class
    screen is the readback of the EPICS V4 PV name.
  </p>
  <div style="text-align: center; margin-top: 2em; margin-bottom: 2em">
    <img alt="NDPva.png" src="NDPva.png" />
  </div>
  <h2 id="PVAServer">Starting the pvAccess server</h2>
  <p>
    In order to actually serve the EPICSv4 PV created by this plugin it is necessary to call 
    <pre>startPVAServer</pre>. 
  </p>
</body>
</html>
